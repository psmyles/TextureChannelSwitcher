<ui:FluentWindow x:Class="TextureChannelSwitcher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Texture Channel Switcher" 
        Height="784" Width="1100" MinWidth="900" MinHeight="784"
        Icon="pack://application:,,,/app.png"
        WindowBackdropType="Mica"
        ExtendsContentIntoTitleBar="True"
        TextOptions.TextFormattingMode="Display"
        FontFamily="Segoe UI">

    <Window.Resources>
        <FontWeight x:Key="HeaderWeight">Bold</FontWeight>
        <FontWeight x:Key="LabelWeight">Normal</FontWeight>
        <FontWeight x:Key="InputWeight">Normal</FontWeight>
        <FontWeight x:Key="ButtonWeight">Medium</FontWeight>

        <Style TargetType="ui:TextBox" BasedOn="{StaticResource {x:Type ui:TextBox}}">
            <Setter Property="Height" Value="32"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="{StaticResource InputWeight}"/>
            <Setter Property="Padding" Value="10,0,10,0"/> 
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
            <Setter Property="Height" Value="32"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="{StaticResource InputWeight}"/>
            <Setter Property="Padding" Value="10,0,10,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="ui:Button" BasedOn="{StaticResource {x:Type ui:Button}}">
            <Setter Property="Height" Value="32"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="{StaticResource ButtonWeight}"/>
            <Setter Property="Padding" Value="10,0,10,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="Label">
            <Setter Property="Height" Value="32"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="{StaticResource LabelWeight}"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}"/>
        </Style>

        <Style x:Key="HeaderStyle" TargetType="ui:TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="{StaticResource HeaderWeight}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <Style x:Key="GridTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10,0"/>
        </Style>
        
       
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <RowDefinition Height="*"/>    <RowDefinition Height="Auto"/> </Grid.RowDefinitions>

        <ui:TitleBar Grid.Row="0" Title="Texture Channel Switcher v0.1">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/app.png"/>
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <Grid Grid.Row="1" Margin="16,0,16,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="480" MinWidth="380"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Padding="0,0,16,0">
                <StackPanel>
                    
                    <StackPanel x:Name="GrpSettings">

                        <ui:Card Padding="12" Margin="0,0,0,4" VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                            <StackPanel>
                                <ui:TextBlock Text="Directories" Style="{StaticResource HeaderStyle}"/>
                                
                                <Grid Margin="0,0,0,8" MinHeight="32">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="8"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBox x:Name="TxtSourcePath" Grid.Column="0" PlaceholderText="Source folder path..."
                                                ToolTip="Path of the folder containing your source images to be converted."/>
                                    <ui:Button x:Name="BtnBrowseSource" Grid.Column="2" Content="Browse" Click="BtnBrowseSource_Click"
                                               ToolTip="Select the folder containing your source images to be converted."/>
                                </Grid>

                                <CheckBox x:Name="ChkUseSourceAsOutput" Content="Use same folder as source" IsChecked="True" 
                                          Checked="ToggleOutput_Checked" Unchecked="ToggleOutput_Checked" 
                                          FontSize="13" Margin="0,0,0,8" MinHeight="32" VerticalContentAlignment="Center"
                                          ToolTip="If selected, the converted images will be in the same folder as the source images."/>

                                <Grid MinHeight="32">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="8"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ui:TextBox x:Name="TxtOutputPath" Grid.Column="0" IsEnabled="False" PlaceholderText="Output folder path..."
                                                ToolTip="Path of the folder where the converted images will be placed."/>
                                    <ui:Button x:Name="BtnBrowseOutput" Grid.Column="2" Content="Browse" IsEnabled="False" Click="BtnBrowseOutput_Click"
                                               ToolTip="The folder where the converted images will be placed."/>
                                </Grid>
                            </StackPanel>
                        </ui:Card>

                        <ui:Card Padding="12" Margin="0,0,0,4" VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                            <StackPanel>
                                <ui:TextBlock Text="File Name Filters" Style="{StaticResource HeaderStyle}"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                    </Grid.RowDefinitions>

                                    <Label Grid.Row="0" Grid.Column="0" Content="Source Prefix"
                                           ToolTip="The start of the filename that will be used to find files."/>
                                    <ui:TextBox x:Name="TxtSrcPrefix" Grid.Row="0" Grid.Column="1" 
                                                PlaceholderText="SourcePrefix_" 
                                                ToolTip="The start of the filename that will be used to find files."/>

                                    <Label Grid.Row="2" Grid.Column="0" Content="Source Suffix"
                                           ToolTip="The end of the filename that will be used to find files."/>
                                    <ui:TextBox x:Name="TxtSrcSuffix" Grid.Row="2" Grid.Column="1" 
                                                PlaceholderText="_SourceSuffix" 
                                                ToolTip="The end of the filename that will be used to find files."/>

                                    <Label Grid.Row="4" Grid.Column="0" Content="Generated Prefix"
                                           ToolTip="The start of the filename that will be used to name the generated file."/>
                                    <ui:TextBox x:Name="TxtGenPrefix" Grid.Row="4" Grid.Column="1" 
                                                PlaceholderText="GeneratedPrefix_" 
                                                ToolTip="The start of the filename that will be used to name the generated file."/>

                                    <Label Grid.Row="6" Grid.Column="0" Content="Generated Suffix"
                                           ToolTip="The end of the filename that will be used to name the generated file."/>
                                    <ui:TextBox x:Name="TxtGenSuffix" Grid.Row="6" Grid.Column="1" 
                                                PlaceholderText="_GeneratedSuffix" 
                                                ToolTip="The end of the filename that will be used to name the generated file."/>
                                </Grid>
                            </StackPanel>
                        </ui:Card>

                        <ui:Card Padding="12" Margin="0,0,0,4" VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                            <StackPanel>
                                <ui:TextBlock Text=" Target Channel Mapping" Style="{StaticResource HeaderStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="50"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="8"/>
                                        <ColumnDefinition Width="100"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="8"/>
                                        <RowDefinition Height="32"/>
                                    </Grid.RowDefinitions>

                                    <Label Grid.Row="0" Grid.Column="0" Content="Red"/>
                                    <ComboBox x:Name="CmbRedSource" Grid.Row="0" Grid.Column="1" SelectedIndex="0">
                                        <ComboBoxItem>From Source Red</ComboBoxItem>
                                        <ComboBoxItem>From Source Green</ComboBoxItem>
                                        <ComboBoxItem>From Source Blue</ComboBoxItem>
                                        <ComboBoxItem>From Source Alpha</ComboBoxItem>
                                    </ComboBox>
                                    <ComboBox x:Name="CmbRedInvert" Grid.Row="0" Grid.Column="3" SelectedIndex="0" 
                                              SelectionChanged="ChannelInvert_SelectionChanged">
                                        <ComboBoxItem>Normal</ComboBoxItem>
                                        <ComboBoxItem>Inverted</ComboBoxItem>
                                        <ComboBoxItem>White</ComboBoxItem>
                                        <ComboBoxItem>Black</ComboBoxItem>
                                    </ComboBox>

                                    <Label Grid.Row="2" Grid.Column="0" Content="Green"/>
                                    <ComboBox x:Name="CmbGreenSource" Grid.Row="2" Grid.Column="1" SelectedIndex="1">
                                        <ComboBoxItem>From Source Red</ComboBoxItem>
                                        <ComboBoxItem>From Source Green</ComboBoxItem>
                                        <ComboBoxItem>From Source Blue</ComboBoxItem>
                                        <ComboBoxItem>From Source Alpha</ComboBoxItem>
                                    </ComboBox>
                                    <ComboBox x:Name="CmbGreenInvert" Grid.Row="2" Grid.Column="3" SelectedIndex="0" 
                                              SelectionChanged="ChannelInvert_SelectionChanged">
                                        <ComboBoxItem>Normal</ComboBoxItem>
                                        <ComboBoxItem>Inverted</ComboBoxItem>
                                        <ComboBoxItem>White</ComboBoxItem>
                                        <ComboBoxItem>Black</ComboBoxItem>
                                    </ComboBox>

                                    <Label Grid.Row="4" Grid.Column="0" Content="Blue"/>
                                    <ComboBox x:Name="CmbBlueSource" Grid.Row="4" Grid.Column="1" SelectedIndex="2">
                                        <ComboBoxItem>From Source Red</ComboBoxItem>
                                        <ComboBoxItem>From Source Green</ComboBoxItem>
                                        <ComboBoxItem>From Source Blue</ComboBoxItem>
                                        <ComboBoxItem>From Source Alpha</ComboBoxItem>
                                    </ComboBox>
                                    <ComboBox x:Name="CmbBlueInvert" Grid.Row="4" Grid.Column="3" SelectedIndex="0" 
                                              SelectionChanged="ChannelInvert_SelectionChanged">
                                        <ComboBoxItem>Normal</ComboBoxItem>
                                        <ComboBoxItem>Inverted</ComboBoxItem>
                                        <ComboBoxItem>White</ComboBoxItem>
                                        <ComboBoxItem>Black</ComboBoxItem>
                                    </ComboBox>

                                    <Label Grid.Row="6" Grid.Column="0" Content="Alpha"/>
                                    <ComboBox x:Name="CmbAlphaSource" Grid.Row="6" Grid.Column="1" SelectedIndex="4" SelectionChanged="CmbAlphaSource_SelectionChanged">
                                        <ComboBoxItem>None</ComboBoxItem>
                                        <ComboBoxItem>From Source Red</ComboBoxItem>
                                        <ComboBoxItem>From Source Green</ComboBoxItem>
                                        <ComboBoxItem>From Source Blue</ComboBoxItem>
                                        <ComboBoxItem>From Source Alpha</ComboBoxItem>
                                    </ComboBox>
                                    <ComboBox x:Name="CmbAlphaInvert" Grid.Row="6" Grid.Column="3" SelectedIndex="0" 
                                              SelectionChanged="ChannelInvert_SelectionChanged">
                                        <ComboBoxItem>Normal</ComboBoxItem>
                                        <ComboBoxItem>Inverted</ComboBoxItem>
                                        <ComboBoxItem>White</ComboBoxItem>
                                        <ComboBoxItem>Black</ComboBoxItem>
                                    </ComboBox>
                                </Grid>
                            </StackPanel>
                        </ui:Card>

                        <ui:Card Padding="12" Margin="0,0,0,8" VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="Output Format" FontWeight="{StaticResource HeaderWeight}" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                                    <ComboBox x:Name="CmbFormat" Grid.Column="1" SelectedIndex="0" SelectionChanged="Filter_TextChanged">
                                        <ComboBoxItem>PNG</ComboBoxItem>
                                        <ComboBoxItem>TGA</ComboBoxItem>
                                    </ComboBox>
                                </Grid>
                            </StackPanel>
                        </ui:Card>
                    
                    </StackPanel>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <ui:Button Grid.Column="0" Content="Preview Results" Appearance="Secondary" 
                                   HorizontalAlignment="Stretch" Click="BtnRefresh_Click"/>
                        
                        <ui:Button Grid.Column="2" x:Name="BtnProcess" Content="Process Textures" Appearance="Primary" 
                                   HorizontalAlignment="Stretch" Click="BtnProcess_Click"/>
                    </Grid>

                </StackPanel>
            </ScrollViewer>

            <GridSplitter Grid.Column="1" Width="1" HorizontalAlignment="Center" VerticalAlignment="Stretch" 
                          Background="{DynamicResource SurfaceStrokeColorDefaultBrush}" ShowsPreview="True"/>

            <Grid Grid.Column="2" Margin="12,0,0,0">
                <TextBlock x:Name="TxtPreviewPlaceholder" 
                           Text="Define source and filters to preview results"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                           FontSize="14"
                           TextWrapping="Wrap"
                           TextAlignment="Center"/>
                
                <ui:DataGrid x:Name="LstPreview" 
                             Visibility="Collapsed"
                             AutoGenerateColumns="False" 
                             HeadersVisibility="Column" 
                             SelectionMode="Single" 
                             IsReadOnly="True"
                             RowHeight="32" 
                             GridLinesVisibility="None" 
                             BorderThickness="1"
                             BorderBrush="{DynamicResource SurfaceStrokeColorDefaultBrush}">
                             
                    <ui:DataGrid.Columns>
                        <DataGridTextColumn Header="Source File" Binding="{Binding SourceName}" Width="*" ElementStyle="{StaticResource GridTextStyle}"/>
                        <DataGridTextColumn Header="Generated File" Binding="{Binding TargetName}" Width="*" ElementStyle="{StaticResource GridTextStyle}"/>
                    </ui:DataGrid.Columns>
                </ui:DataGrid>
            </Grid>
        </Grid>

        <Border Grid.Row="2" Background="{DynamicResource ControlFillColorDefaultBrush}" BorderThickness="0,1,0,0" 
                BorderBrush="{DynamicResource SurfaceStrokeColorDefaultBrush}" Padding="16,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <ui:TextBlock x:Name="LblStatus" Text="Ready" VerticalAlignment="Center" 
                              FontSize="12" Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>

                <ProgressBar x:Name="ProgressBarMain" Grid.Column="1" Width="150" Height="12" 
                             Visibility="Collapsed" VerticalAlignment="Center" Margin="16,0,0,0"/>
            </Grid>
        </Border>
    </Grid>
</ui:FluentWindow>